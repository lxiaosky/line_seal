webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s=i("Zrlr"),a=i.n(s),o=i("wxAW"),c=i.n(o),r=function(){function t(e){a()(this,t),this.canvas=document.getElementById(e.id),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width/2,this.height=this.canvas.height/2,this.name=e.name,this.company=e.company}return c()(t,[{key:"startDrawing",value:function(){this.createBorder(),this.create5star(this.context,this.width,this.height,20,"#f00",0),this.createName(),this.createCompany()}},{key:"createErr",value:function(){this.context.lineWidth=1,this.context.strokeStyle="#f00",this.context.beginPath(),this.context.rect(0,0,this.canvas.width,this.canvas.height),this.context.stroke()}},{key:"createBorder",value:function(){this.context.lineWidth=7,this.context.strokeStyle="#f00",this.context.beginPath(),this.context.arc(this.width,this.height,85,0,2*Math.PI),this.context.stroke()}},{key:"createName",value:function(){this.context.font="16px Helvetica",this.context.textBaseline="middle",this.context.textAlign="center",this.context.lineWidth=1,this.context.fillStyle="#f00",this.context.fillText(this.name,this.width,this.height+55)}},{key:"createCompany",value:function(){this.context.translate(this.width,this.height),this.context.font="20px Helvetica";for(var t,e=this.company.length,i=4*Math.PI/(3*(e-1)),n=this.company.split(""),s=0;s<e;s++)t=n[s],0===s?this.context.rotate(5*Math.PI/6):this.context.rotate(i),this.context.save(),this.context.translate(70,0),this.context.rotate(Math.PI/2),this.context.fillText(t,0,5),this.context.restore()}},{key:"create5star",value:function(t,e,i,n,s,a){t.save(),t.fillStyle=s,t.translate(e,i),t.rotate(Math.PI+a),t.beginPath();for(var o=Math.sin(0),c=Math.cos(0),r=Math.PI/5*4,h=0;h<5;h++)o=Math.sin(h*r),c=Math.cos(h*r),t.lineTo(o*n,c*n);t.closePath(),t.stroke(),t.fill(),t.restore()}},{key:"redraw",value:function(t){this.canvas.height=this.canvas.height,t&&(this.company=t.company,this.name=t.name,this.startDrawing())}}]),t}(),h={data:function(){return{stamp:null,company:"某某某XXX有限公司",name:"测试专用章",border:!1}},mounted:function(){this.stamp=new r({id:"cachet",name:this.name,company:this.company}),this.stamp.startDrawing()},methods:{redraw:function(){this.stamp.redraw({name:this.name,company:this.company})},addBorder:function(){this.border=!this.border,document.getElementById("cachet").style.borderColor=this.border?"#f00":"#fff"}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("div",{staticClass:"text"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.company,expression:"company"}],attrs:{type:"text",placeholder:"输入单位名称"},domProps:{value:t.company},on:{input:function(e){e.target.composing||(t.company=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"输入印章名称"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),i("button",{on:{click:t.redraw}},[t._v("确定")]),t._v(" "),i("button",{on:{click:t.addBorder}},[t._v(t._s(t.border?"移除边框":"加边框"))])]),t._v(" "),i("canvas",{attrs:{id:"cachet",width:"180",height:"180"}})])},staticRenderFns:[]};var d=i("VU/8")(h,l,!1,function(t){i("hcQT")},null,null).exports,u=function(){function t(e){a()(this,t),this.canvas=document.getElementById(e.id),this.context=this.canvas.getContext("2d"),this.flag=!1,this.x=0,this.y=0,this.color="black",this.index=0}return c()(t,[{key:"startDrawing",value:function(t){this.flag=!0,this.x=t.offsetX,this.y=t.offsetY}},{key:"endDrawing",value:function(t,e){this.flag=!1,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.createSvg(t,e)}},{key:"moveDrawing",value:function(t,e,i){this.color=i,this[t](e)}},{key:"changeSvg",value:function(t){var e=t.target.parentElement;e.parentNode.removeChild(e)}},{key:"createSvg",value:function(t,e){var i=document.getElementById("drawSvg"),n=document.createElementNS("http://www.w3.org/2000/svg","g"),s=document.createElementNS("http://www.w3.org/2000/svg","line"),a=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("x1",this.x),s.setAttribute("y1",this.y),s.setAttribute("x2",t.offsetX),s.setAttribute("y2",t.offsetY),s.setAttribute("stroke",e),n.setAttribute("id",this.index++),a.setAttribute("d","M512 32C246.4 32 32 246.4 32 512s214.4 480 480 480 480-214.4 480-480S777.6 32 512 32m201.6 681.6c-12.8 12.8-35.2 12.8-48 0L512 560l-153.6 153.6c-12.8 12.8-35.2 12.8-48 0-12.8-12.8-12.8-35.2 0-48l153.6-153.6-153.6-153.6c-12.8-12.8-12.8-35.2 0-48 12.8-12.8 35.2-12.8 48 0l153.6 153.6 153.6-153.6c12.8-12.8 35.2-12.8 48 0 12.8 12.8 12.8 35.2 0 48L560 512l153.6 153.6c16 12.8 16 35.2 0 48m0 0z"),a.setAttribute("fill","#d81e06"),a.setAttribute("transform","translate("+(t.offsetX-7.2)+" "+(t.offsetY-7.2)+") scale(.015, .015)"),a.setAttribute("cursor","pointer"),a.addEventListener("click",this.changeSvg,!1),n.appendChild(s),n.appendChild(a),i.appendChild(n)}},{key:"drawLine",value:function(t){this.flag&&(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.beginPath(),this.context.strokeStyle=this.color,this.context.moveTo(this.x,this.y),this.context.lineTo(t.offsetX,t.offsetY),this.context.stroke())}}]),t}(),m={data:function(){return{stamp:null,list:[{id:"drawLine",name:"画线"}],type:"drawLine",imgs:[],index:0,color:"black",colorList:["black","red","blue"],draw:!1}},mounted:function(){var t=this;this.stamp=new u({id:"draw"}),this.stamp.canvas.onmousedown=function(e){t.stamp.startDrawing(e)},this.stamp.canvas.onmouseup=function(e){t.stamp.endDrawing(e,t.color),t.draw=!1},this.stamp.canvas.onmousemove=function(e){t.stamp.moveDrawing(t.type,e,t.color)},document.onkeyup=function(e){27!==e.keyCode&&96!==e.keyCode||(t.draw=!1)}},methods:{choiceColor:function(t,e){this.color=t,this.index=e}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("div",{staticClass:"btn"},t._l(t.list,function(e){return i("button",{key:e.id,on:{click:function(i){t.type=e.id,t.draw=!0}}},[t._v(t._s(e.name))])})),t._v(" "),i("div",{staticClass:"draw",style:{cursor:t.draw?"crosshair":"auto"}},[i("svg",{attrs:{id:"drawSvg",xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"400",height:"400"}}),t._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:t.draw,expression:"draw"}],attrs:{id:"draw",width:"400",height:"400"}})]),t._v(" "),i("div",{staticClass:"colorBox"},t._l(t.colorList,function(e,n){return i("span",{key:n,staticClass:"color",style:{outlineWidth:t.index===n?"1px":"0"},on:{click:function(i){t.choiceColor(e,n)}}},[i("span",{style:{background:e}})])}))])},staticRenderFns:[]};var f=i("VU/8")(m,v,!1,function(t){i("Tglo")},null,null).exports,p=function(){function t(e){a()(this,t),this.canvas=document.createElement("canvas"),this.canvas.width=90,this.canvas.height=40,this.context=this.canvas.getContext("2d"),this.name=e}return c()(t,[{key:"startDrawing",value:function(){this.createBorder(),this.createName()}},{key:"createBorder",value:function(){this.context.lineWidth=4,this.context.strokeStyle="#f00",this.context.beginPath(),this.context.rect(0,0,this.canvas.width,this.canvas.height),this.context.stroke()}},{key:"createName",value:function(){this.context.font="20px Helvetica",this.context.textBaseline="middle",this.context.textAlign="center",this.context.lineWidth=1,this.context.fillStyle="#f00",this.context.fillText(this.name,this.canvas.width/2,this.canvas.height/2)}},{key:"redraw",value:function(t){this.name=t,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.startDrawing()}}]),t}(),g={data:function(){return{stamp:null,list:[{id:1,name:"马化腾"},{id:2,name:"马云"},{id:3,name:"马明哲"}],img:null,imgs:[],mask:!1}},computed:{cursor:function(){return this.img?"url('"+this.img+"'), auto":"auto"}},mounted:function(){var t=this;this.stamp=new p(""),document.onkeyup=function(e){27!==e.keyCode&&96!==e.keyCode||(t.img=null,t.mask=!1)}},methods:{redraw:function(t){var e=this;this.stamp.redraw(t.name),this.stamp.canvas.toBlob(function(t){e.img=URL.createObjectURL(t)}),this.mask=!0},seal:function(t){this.img&&(this.imgs.push({img:this.img,top:t.offsetY-5,left:t.offsetX-5,answer:Math.ceil(10*Math.random())>5}),this.img=null,this.mask=!1)},close:function(t){this.imgs.splice(t,1)}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("div",{staticClass:"btn"},t._l(t.list,function(e){return i("button",{key:e.id,on:{click:function(i){t.redraw(e)}}},[t._v(t._s(e.name))])})),t._v(" "),i("div",{style:{cursor:t.cursor},attrs:{id:"canvas"}},[t._l(t.imgs,function(e,n){return i("span",{key:n,staticClass:"img-box",class:e.answer?"err":"",style:{top:e.top+"px",left:e.left+"px"}},[i("img",{staticClass:"img",attrs:{src:e.img}}),t._v(" "),i("span",{staticClass:"close",on:{click:function(e){t.close(n)}}},[t._v("x")])])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.mask,expression:"mask"}],staticClass:"mask",on:{click:function(e){t.seal(e)}}})],2)])},staticRenderFns:[]};var w={components:{Cachet:d,Draw:f,PrivateChop:i("VU/8")(g,x,!1,function(t){i("dZk9")},null,null).exports}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"demo"},[e("Draw"),this._v(" "),e("Cachet"),this._v(" "),e("PrivateChop")],1)])},staticRenderFns:[]};var k=i("VU/8")(w,y,!1,function(t){i("UdaE")},"data-v-41bd3fb2",null).exports;n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:k},template:"<App/>"})},Tglo:function(t,e){},UdaE:function(t,e){},dZk9:function(t,e){},hcQT:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7dfb41866cf0224cf675.js.map